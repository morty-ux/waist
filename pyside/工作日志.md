# 工作日志

**项目：** 康复医疗仪表盘

---

## Bug 和问题记录

### 2026-02-05 - 滑动条鼠标事件异常问题

**环境：**
- Python 3.10+
- PySide6
- qfluentwidgets
- 自定义 QSS 样式文件

**问题描述：**
在使用 QFluentWidgets 的 `Slider` 组件时，发现滑动条在鼠标没有点击拖动的情况下也会触发值变化。具体表现为：鼠标在滑动条上移动时，即使没有点击拖动，滑动条的值也会发生改变。

**问题原因：**
通过逐步排查，发现是 QSS 样式文件中的 Slider 样式定义导致的问题。

问题代码位于 `resource/light/demo.qss`：

```css
Slider::handle:horizontal {
    width: 16px;
    height: 16px;
    background: #00A896;
    border-radius: 8px;
    margin: -6px 0;  /* 问题所在 */
}
```

`margin: -6px 0` 导致滑块手柄（handle）超出了轨道（groove）的范围，扩大了点击区域，导致鼠标在手柄附近移动时误触发滑动条事件。

**解决方法：**

方法一：修改负边距（推荐）
将 `margin: -6px 0` 改为 `margin: 0`。

方法二：移除自定义样式
直接注释掉或删除 Slider 相关的样式定义，使用 QFluentWidgets 的默认样式。

**排查过程：**
1. 创建最简单的测试用例（只有滑动条）→ 正常
2. 逐步添加 CardWidget → 正常
3. 添加 ScrollArea → 正常
4. 添加 FluentWindow → 正常
5. 添加多个滑动条和标签 → 正常
6. 加载 QSS 样式文件 → **异常**

通过逐步测试，定位到 QSS 样式文件是问题根源。

**经验总结：**
QSS 样式不仅影响外观，还可能影响组件的行为和事件处理。使用负边距时要特别小心，特别是对于交互式组件。

---

## 工作内容记录

### 2026-02-05

**完成内容：**
- 简化主界面，删除所有状态卡片、人体数字孪生区等复杂组件，只保留四个滑动条进行测试
- 创建测试文件 test.py，逐步添加组件排查问题
- 修复 QSS 样式文件中的 Slider 样式问题
- 创建工作日志文档，记录问题排查过程
- 推送代码到 GitHub

**使用方法：**
- 逐步测试法：从最简单的组件开始，逐步添加复杂组件
- 最小可复现用例：创建独立的测试文件快速定位问题
- Git 版本控制：记录每次修改和问题解决过程
